import sys
import sqlite3
def create(database):
    import sqlite3
    conn = sqlite3.connect(database)
    conn.text_factory = str
    c = conn.cursor()
    c.execute("CREATE VIRTUAL TABLE PROJECT using FTS4 (input)")
    conn.commit()
    text = "Database Created"
    return text

def insert(data):
    import sqlite3
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()
    c.execute("INSERT into PROJECT values (?)", (data,))
    for row in c.execute("SELECT ROWID,* FROM PROJECT ORDER BY ROWID DESC LIMIT 1"):
        print ("\nPOST VERIFIED:\n",row[0],row[1])
    conn.commit()
    conn.close()
    return data

def search(data):
    import sqlite3
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()#for row in c.execute("SELECT ROWID,* FROM PROJECT WHERE input MATCH ?",(data,)):
    #    print ("\nINFO Found Here:",row[0],row[1])
    for row in c.execute("SELECT ROWID,* FROM PROJECT"):
        if data in row[1]:    
            print ("\nINFO Found Here:\n",row[0],row[1])
    #conn.commit()
    #conn.close()
def delete(rowid):
    import sqlite3
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()
    c.execute("DELETE FROM PROJECT WHERE rowid = ?", (rowid,))
    conn.commit()
    conn.close()
    text = "ROWID "+rowid+" Deleted"
    return text

def main():
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()
    for row in c.execute("SELECT rowid, * FROM PROJECT"):
        print (row[0],": ",row[1])

def prtmain(filename):
    import sqlite3
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()    
    fn = open(filename, "w")
    conn = sqlite3.connect("keywords.db")
    conn.text_factory = str
    c = conn.cursor()
    for row in c.execute("SELECT rowid, * FROM PROJECT"):
        TEXT = "id:"+str(row[0])+"\n"+str(row[1])
        TEXT = str(TEXT)
        TEXT = TEXT.replace('\\n','\n')
        TEXT = "".join(TEXT)
        fn.write(TEXT+'\n----\n')
    fn.close()
def HELP():
    TXT = """
    -I insert / -D delete / -R read / -H help
    examples:
    Notice the entry is in parenthese.
    -I  to insert "STUFF to be inserted"
    LINK -I "STUFF to be inserted"
    -D to delete where rowid is 3
    LINK -D 3
    Notice the period after -R . 
    -R . read all
    To search for the term "current project"
    LINK -S 3
    -S "current project"
    LINK -R .
    -H help on options
    LINK -H .
    """
    print (TXT)
