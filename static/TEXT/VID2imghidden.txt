import cv2
from random import randint
from PIL import Image
import time
import random
#num = randint(0,len(MP4S))

def vid2img(count,videofile,outputpath):
    vidcap = cv2.VideoCapture(videofile)
    # get total number of frames
    totalFrames = vidcap.get(cv2.CAP_PROP_FRAME_COUNT)
    randomFrameNumber=random.randint(0, totalFrames)
    # set frame position
    vidcap.set(cv2.CAP_PROP_POS_FRAMES,randomFrameNumber)
    success, image = vidcap.read()
    print(image)
    if success:
        print(".",end="|")
        cv2.imwrite("junk/archived-images.png", image)
    IM = Image.open("junk/archived-images.png")
    im = IM.resize((720,480))
    timestr = time.strftime("%Y%m%d-%H%M%S")
    filename = outputpath+"/Frame"+str(randomFrameNumber)+"-"+str(count)+"_"+timestr+"_.png"
    im.save(filename)
    nim = Image.open(filename)
    if count==1:print(filename)
    return nim
