#!/home/jack/miniconda3/envs/cloned_base/bin/python
import moviepy.editor as mp
import logging
from sys import argv

# Setup logging
logging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')

def reverse_video(input_path, output_path):
    logging.info("Starting the video reversing process")
    try:
        # Load the video
        logging.info(f"Loading video from {input_path}")
        video = mp.VideoFileClip(input_path)

        # Reverse the video
        logging.info("Reversing the video")
        reversed_video = video.fx(mp.vfx.time_mirror)

        # Save the reversed video
        logging.info(f"Saving the reversed video to {output_path}")
        reversed_video.write_videofile(output_path, codec='libx264', audio_codec='aac')

        logging.info("Video reversing process completed successfully")
    except Exception as e:
        logging.error(f"An error occurred: {e}")

if __name__ == "__main__":
    # Define the input and output paths
    input_video_path = argv[1]
    output_video_path = argv[2]

    # Reverse the video
    reverse_video(input_video_path, output_video_path)
